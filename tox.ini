[tox]
envlist = cov-clean,py3,doctest,flake8,pylint,cov-report

[testenv]
deps =
  pytest
  pytest-cov
  -Ur{toxinidir}/requirements.txt
commands = pytest -v --cov={envsitepackagesdir}/pcof --cov-report=term-missing

[testenv:flake8]
description = "Running flake8"
basepython = python3
deps =
  flake8
  flake8-pytest
  flake8-builtins
  flake8-docstrings
  flake8-bugbear
  flake8-colors
  pep8-naming
  flake8-comprehensions
  flake8-import-order
  flake8-import-style
  pydocstyle
commands = flake8

[testenv:cov-clean]
deps = coverage
skip_install = true
commands = coverage erase

[testenv:cov-report]
deps = coverage
skip_install = true
commands =
  coverage html
  coverage report --fail-under=100.0

[testenv:pylint]
description = "Running pylint"
basepython = python3
deps = pylint
commands = pylint --errors-only pcof/

[testenv:doctest]
description = "Running doctest"
basepython = python3
commands = pytest --doctest-modules --ignore-glob=tests/test_*.py -v

[flake8]
exclude = .venv,.git,.tox,dist,doc,*lib/python*,*egg,build,tests
show-source = True
max-line-length = 80
